<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Advanced Dashboard - MoodBox</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
        <style>
            /* Advanced visuals and 3D interactions */
            :root{ --bg:#0b1020; --card:#0f1724; --muted:#94a3b8; --accent-start:#7c3aed; --accent-end:#ec4899 }
            html,body{height:100%;background:radial-gradient(1200px 600px at 10% 10%, rgba(124,58,237,0.08), transparent), linear-gradient(180deg,#020617 0%, #071027 60%);}
            .scene { perspective: 1200px; }
            .tilt-card{ transform-style: preserve-3d; transition: transform 300ms cubic-bezier(.2,.9,.2,1); will-change: transform; }
            .layer { position: absolute; inset:0; border-radius:0.75rem; overflow:hidden; }
            .glass { backdrop-filter: blur(6px) saturate(120%); background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02)); border:1px solid rgba(255,255,255,0.04); }

            /* animated gradient */
            .accent-gradient { background: linear-gradient(90deg, var(--accent-start), var(--accent-end)); background-size: 200% 200%; animation: accentShift 6s linear infinite; }
            @keyframes accentShift { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }

            /* stats animations */
            .stat-num { transform-origin: left center; }

            /* subtle float for decorative elements */
            @keyframes floaty { 0%{ transform: translateY(0) } 50%{ transform: translateY(-8px) } 100%{ transform: translateY(0) } }
            .float { animation: floaty 4s ease-in-out infinite; }

            /* particle canvas overlay */
            #particles { position: fixed; inset:0; z-index:0; pointer-events:none; }

            /* responsive tweaks */
            @media (min-width:1024px){ .grid-main { grid-template-columns: 420px 1fr 360px; } }
        </style>
</head>
<body class="text-white">
    <canvas id="particles"></canvas>

    <!-- Top nav -->
    <nav class="z-30 relative py-4 px-6 flex items-center justify-between">
        <div class="flex items-center gap-4">
            <a href="mood cafe.html" class="text-2xl font-extrabold bg-clip-text text-transparent" style="background-image:linear-gradient(90deg,var(--accent-start),var(--accent-end));">MoodBox</a>
            <div class="text-sm text-slate-300">Experience Dashboard</div>
        </div>
        <div class="flex items-center gap-3">
            <button id="notificationBtn" class="p-2 rounded-full hover:bg-white/5"><i class="fas fa-bell"></i></button>
            <button id="profileBtn" class="w-10 h-10 rounded-full bg-gradient-to-r from-purple-600 to-pink-500 flex items-center justify-center shadow-lg">AA</button>
        </div>
    </nav>

    <main class="relative z-10 max-w-7xl mx-auto px-6 py-8">
        <div class="grid grid-cols-1 gap-6 grid-main">
            <!-- Left: 3D Card / quick profile -->
            <aside class="scene relative">
                <div id="heroCard" class="tilt-card relative bg-[rgba(255,255,255,0.02)] glass rounded-xl p-6 shadow-2xl" style="height:420px;">
                    <div class="layer" style="transform: translateZ(40px);">
                        <div class="flex items-start justify-between">
                            <div>
                                <h2 class="text-2xl font-bold">Welcome back, <span id="userName">Aayush</span></h2>
                                <p class="text-sm text-slate-300 mt-1">Your personalized MoodBox insights</p>
                            </div>
                            <div class="flex flex-col items-end">
                                <div class="text-xs text-slate-300">Member level</div>
                                <div class="text-2xl font-bold text-amber-400">Gold</div>
                            </div>
                        </div>

                        <!-- 3D visual centerpiece -->
                        <div id="visualGlobe" class="mt-6 relative mx-auto w-full h-[220px] rounded-lg bg-gradient-to-br from-purple-900/30 to-pink-800/10 overflow-hidden">
                            <!-- layered circles for parallax */ -->
                            <div id="globeLayer" class="absolute inset-0 flex items-center justify-center">
                                <svg width="220" height="220" viewBox="0 0 220 220" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <defs>
                                        <linearGradient id="g1" x1="0" x2="1">
                                            <stop offset="0" stop-color="#7c3aed" stop-opacity=".8"/>
                                            <stop offset="1" stop-color="#ec4899" stop-opacity=".6"/>
                                        </linearGradient>
                                    </defs>
                                    <circle cx="110" cy="110" r="90" stroke="url(#g1)" stroke-width="1.6" fill="rgba(255,255,255,0.02)"/>
                                    <!-- orbit dots -->
                                    <g id="orbits" stroke="rgba(255,255,255,0.04)">
                                        <ellipse cx="110" cy="110" rx="70" ry="38" transform="rotate(20 110 110)" />
                                        <ellipse cx="110" cy="110" rx="52" ry="52" transform="rotate(60 110 110)" />
                                    </g>
                                </svg>
                            </div>
                        </div>

                        <div class="mt-6 grid grid-cols-3 gap-3">
                            <div class="p-3 bg-white/3 rounded-lg text-center">
                                <div class="text-sm text-slate-300">Points</div>
                                <div class="text-xl font-bold stat-num" data-target="375">375</div>
                            </div>
                            <div class="p-3 bg-white/3 rounded-lg text-center">
                                <div class="text-sm text-slate-300">Visits</div>
                                <div class="text-xl font-bold stat-num" data-target="18">18</div>
                            </div>
                            <div class="p-3 bg-white/3 rounded-lg text-center">
                                <div class="text-sm text-slate-300">Upcoming</div>
                                <div class="text-xl font-bold stat-num" data-target="2">2</div>
                            </div>
                        </div>
                    </div>
                    <div class="layer" style="transform: translateZ(10px) scale(.99); pointer-events:none;"></div>
                </div>
            </aside>

            <!-- Center: detailed panels -->
            <section class="space-y-6">
                <div class="flex items-center justify-between gap-4">
                    <h3 class="text-xl font-semibold">My Dashboard</h3>
                    <div class="flex items-center gap-3">
                        <button id="refreshBtn" class="px-4 py-2 rounded-lg bg-white/5 hover:bg-white/6">Refresh</button>
                        <div class="text-sm text-slate-400">Last synced: <span id="lastSynced">Just now</span></div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="p-6 rounded-xl glass">
                        <h4 class="font-semibold mb-3">Membership Progress</h4>
                        <div class="w-full bg-white/5 rounded-full h-4 overflow-hidden mb-3"><div id="progressBar" class="h-full bg-gradient-to-r from-amber-400 to-purple-500" style="width:42%"></div></div>
                        <div class="flex items-center justify-between text-sm text-slate-300">
                            <div>Bronze</div>
                            <div>Next level in <strong id="pointsToNext">58 pts</strong></div>
                        </div>
                    </div>

                    <div class="p-6 rounded-xl glass">
                        <h4 class="font-semibold mb-3">Smart Recommendations</h4>
                        <div id="recommendations" class="space-y-3 text-slate-200"></div>
                    </div>
                </div>

                <div class="grid grid-cols-1 gap-6">
                    <div class="p-6 rounded-xl glass">
                        <h4 class="font-semibold mb-4">My Bookings</h4>
                        <div id="bookingsList" class="space-y-3"></div>
                    </div>

                    <div class="p-6 rounded-xl glass">
                        <h4 class="font-semibold mb-4">Activity Feed</h4>
                        <div id="activityFeed" class="space-y-3 text-slate-200"></div>
                    </div>
                </div>
            </section>

            <!-- Right: compact widgets -->
            <aside class="space-y-6">
                <div class="p-4 rounded-xl glass">
                    <h5 class="font-medium mb-2">Quick Actions</h5>
                    <div class="grid gap-2">
                        <button class="px-3 py-2 rounded-lg bg-gradient-to-r from-purple-600 to-pink-500">Book a Zone</button>
                        <button class="px-3 py-2 rounded-lg bg-white/5">Redeem Points</button>
                        <button class="px-3 py-2 rounded-lg bg-white/5">Refer a Friend</button>
                    </div>
                </div>

                <div class="p-4 rounded-xl glass">
                    <h5 class="font-medium mb-2">Metrics</h5>
                    <div class="text-sm text-slate-300">Spend (30d)</div>
                    <div class="text-2xl font-bold">$342</div>
                </div>
            </aside>
                </div>
        </main>

        <!-- Modals: Settings, Booking, Redeem, Refer -->
        <div id="settingsModal" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/60 p-4">
            <div class="w-full max-w-2xl bg-[rgba(10,12,20,0.9)] rounded-xl border border-white/6 p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-semibold">Advanced Settings</h3>
                    <button id="closeSettings" class="p-2 rounded hover:bg-white/5">‚úï</button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <nav class="space-y-2">
                        <button class="settingsTab w-full text-left px-3 py-2 rounded-md bg-white/3" data-tab="language">Language</button>
                        <button class="settingsTab w-full text-left px-3 py-2 rounded-md" data-tab="billing">Billing</button>
                        <button class="settingsTab w-full text-left px-3 py-2 rounded-md" data-tab="subscription">Subscription</button>
                        <button class="settingsTab w-full text-left px-3 py-2 rounded-md" data-tab="account">Account</button>
                    </nav>

                    <div class="md:col-span-2">
                        <div id="settingsContent">
                            <div id="tab-language" class="settingsPane">
                                <label class="block text-sm text-slate-300 mb-2">Choose language</label>
                                <select id="languageSelect" class="w-full p-2 rounded bg-white/5">
                                    <option value="en">English</option>
                                    <option value="es">Espa√±ol</option>
                                    <option value="fr">Fran√ßais</option>
                                    <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
                                </select>
                                <p class="text-sm text-slate-400 mt-3">Changing the language will update UI labels in this static preview.</p>
                            </div>

                            <div id="tab-billing" class="settingsPane hidden">
                                <h4 class="font-semibold">Billing</h4>
                                <div class="mt-3 bg-white/3 p-3 rounded">
                                    <div class="text-sm text-slate-200">Card ending ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ 4242</div>
                                    <div class="text-sm text-slate-400">Next invoice: $24.00 ‚Äî <span id="nextInvoiceDate">Dec 01, 2025</span></div>
                                    <div class="mt-3 flex gap-2"><button id="payInvoice" class="px-3 py-2 rounded bg-gradient-to-r from-purple-600 to-pink-500">Pay Now</button><button id="updateCard" class="px-3 py-2 rounded bg-white/5">Update Card</button></div>
                                </div>
                            </div>

                            <div id="tab-subscription" class="settingsPane hidden">
                                <h4 class="font-semibold">Subscription</h4>
                                <div class="mt-3">
                                    <div class="flex items-center justify-between mb-3"><div>
                                        <div class="font-medium">Plan</div>
                                        <div class="text-sm text-slate-400">Gold Monthly</div>
                                    </div><div><button id="changePlan" class="px-3 py-2 rounded bg-white/5">Change Plan</button></div></div>
                                    <div class="flex items-center gap-3"><label class="text-sm text-slate-300">Auto-renew</label><input id="autoRenew" type="checkbox" checked /></div>
                                </div>
                            </div>

                            <div id="tab-account" class="settingsPane hidden">
                                <h4 class="font-semibold">Account</h4>
                                <div class="mt-3 text-sm text-slate-300">Manage account settings or sign out.</div>
                                <div class="mt-4 flex gap-2"><button id="logoutBtn" class="px-3 py-2 rounded bg-red-600">Logout</button><button id="deleteAccount" class="px-3 py-2 rounded bg-white/5">Delete Account</button></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Booking Modal -->
        <div id="bookingModal" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/60 p-4">
            <div class="w-full max-w-md bg-[rgba(10,12,20,0.95)] rounded-xl p-6 border border-white/6">
                <h3 class="text-lg font-semibold mb-3">Book a Zone</h3>
                <label class="text-sm text-slate-300">Zone</label>
                <select id="bookZoneSelect" class="w-full p-2 rounded bg-white/5 mb-3"><option>Couple Pod A1</option><option>Silent Pod S2</option><option>Game Arena G3</option></select>
                <label class="text-sm text-slate-300">Date & Time</label>
                <input id="bookDatetime" type="datetime-local" class="w-full p-2 rounded bg-white/5 mb-3" />
                <div class="flex justify-end gap-2"><button id="cancelBooking" class="px-3 py-2 rounded bg-white/5">Cancel</button><button id="confirmBooking" class="px-3 py-2 rounded bg-gradient-to-r from-purple-600 to-pink-500">Confirm</button></div>
            </div>
        </div>

        <!-- Redeem Modal -->
        <div id="redeemModal" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/60 p-4">
            <div class="w-full max-w-md bg-[rgba(10,12,20,0.95)] rounded-xl p-6 border border-white/6">
                <h3 class="text-lg font-semibold mb-3">Redeem Points</h3>
                <div class="text-sm text-slate-300 mb-3">You have <strong id="availablePoints">375</strong> points.</div>
                <input id="redeemAmount" type="number" min="1" max="375" class="w-full p-2 rounded bg-white/5 mb-3" placeholder="Points to redeem" />
                <div class="flex justify-end gap-2"><button id="cancelRedeem" class="px-3 py-2 rounded bg-white/5">Cancel</button><button id="confirmRedeem" class="px-3 py-2 rounded bg-gradient-to-r from-purple-600 to-pink-500">Redeem</button></div>
            </div>
        </div>

        <!-- Refer Modal -->
        <div id="referModal" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/60 p-4">
            <div class="w-full max-w-md bg-[rgba(10,12,20,0.95)] rounded-xl p-6 border border-white/6">
                <h3 class="text-lg font-semibold mb-3">Refer a Friend</h3>
                <div class="text-sm text-slate-300 mb-3">Share this referral link to earn bonus points:</div>
                <div class="bg-white/5 p-3 rounded mb-3" id="refLink">https://moodbox.example/ref/AAYUSH123</div>
                <div class="flex justify-end gap-2"><button id="copyRef" class="px-3 py-2 rounded bg-white/5">Copy</button><button id="closeRefer" class="px-3 py-2 rounded bg-gradient-to-r from-purple-600 to-pink-500">Done</button></div>
            </div>
        </div>

        <script>
        // Small particle system for background (canvas)
        (function(){
            const canvas = document.getElementById('particles');
            const ctx = canvas.getContext('2d');
            let W = canvas.width = innerWidth; let H = canvas.height = innerHeight;
            const particles = Array.from({length: 70}).map(()=>({ x: Math.random()*W, y: Math.random()*H, r:Math.random()*1.6+0.4, vx:(Math.random()-0.5)*0.2, vy:(Math.random()-0.5)*0.2 }));
            function resize(){ W=canvas.width=innerWidth; H=canvas.height=innerHeight; }
            addEventListener('resize', resize);
            function draw(){ ctx.clearRect(0,0,W,H); particles.forEach(p=>{ p.x+=p.vx; p.y+=p.vy; if(p.x<0)p.x=W; if(p.x>W)p.x=0; if(p.y<0)p.y=H; if(p.y>H)p.y=0; ctx.beginPath(); ctx.fillStyle='rgba(124,58,237,0.08)'; ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fill(); }); requestAnimationFrame(draw); }
            draw();
        })();

        // Tilt 3D card mouse interaction
        (function(){
            const card = document.getElementById('heroCard');
            const rect = () => card.getBoundingClientRect();
            function onMove(e){ const r = rect(); const cx = r.left + r.width/2; const cy = r.top + r.height/2; const dx = (e.clientX - cx); const dy = (e.clientY - cy); const rx = -dy / 30; const ry = dx / 30; card.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg) scale(1.02)`; }
            function onLeave(){ card.style.transform = 'rotateX(0deg) rotateY(0deg) scale(1)'; }
            card.addEventListener('mousemove', onMove); card.addEventListener('mouseleave', onLeave);
        })();

        // Animated counters
        (function(){
            function animateNumber(el, target, duration=900){ const start=0, startTime=performance.now(); function step(t){ const p=Math.min(1,(t-startTime)/duration); const v=Math.floor(start + (target-start)*easeOutCubic(p)); el.textContent = v; if(p<1) requestAnimationFrame(step); } requestAnimationFrame(step); }
            function easeOutCubic(t){ return 1 - Math.pow(1-t,3); }
            document.querySelectorAll('.stat-num').forEach(el=> animateNumber(el, Number(el.dataset.target||0)));
        })();

        // Sample data and wiring for bookings/activity/recs
        (function(){
            const bookings = [
                { id:'B1', zone:'Couple Pod A1', date:'2025-11-15', time:'19:00', total:24, status:'confirmed' },
                { id:'B2', zone:'Silent Pod S2', date:'2025-11-20', time:'10:00', total:6, status:'pending' }
            ];
            const activities = [
                { id:'a1', text:'Completed Gaming Session (+50 pts)', date:'2025-11-01' },
                { id:'a2', text:'Friend Referral (+100 pts)', date:'2025-11-05' }
            ];
            const recs = [
                { emoji:'üéØ', title:'First Visit Bonus', description:'Complete your first visit to earn 50 bonus points.' },
                { emoji:'üåü', title:'Weekend Special', description:'Book any zone this weekend and earn double points.' }
            ];

            // render bookings
            const bl = document.getElementById('bookingsList');
            bookings.forEach(b=>{
                const div = document.createElement('div'); div.className='flex items-center justify-between p-3 bg-white/3 rounded-lg';
                div.innerHTML = `<div><div class="font-medium">${b.zone}</div><div class="text-xs text-slate-300">${b.date} ‚Ä¢ ${b.time}</div></div><div class="text-amber-300 font-semibold">$${b.total}</div>`;
                bl.appendChild(div);
            });

            // render activity
            const af = document.getElementById('activityFeed');
            activities.forEach(a=>{ const d=document.createElement('div'); d.className='p-3 bg-white/3 rounded-lg'; d.innerHTML=`<div class="text-sm">${a.text}</div><div class="text-xs text-slate-400 mt-1">${a.date}</div>`; af.appendChild(d); });

            // render recommendations
            const recEl = document.getElementById('recommendations');
            recs.forEach(r=>{ const c=document.createElement('div'); c.className='p-3 rounded-lg bg-gradient-to-r from-purple-700/30 to-pink-700/20'; c.innerHTML=`<div class="flex items-start gap-3"><div class="text-2xl">${r.emoji}</div><div><div class="font-semibold">${r.title}</div><div class="text-sm text-slate-300">${r.description}</div></div></div>`; recEl.appendChild(c); });

            // refresh button to simulate data reload
            document.getElementById('refreshBtn').addEventListener('click', ()=>{
                document.getElementById('lastSynced').textContent = 'Just now';
                // small pulse effect
                document.getElementById('refreshBtn').classList.add('animate-pulse'); setTimeout(()=>document.getElementById('refreshBtn').classList.remove('animate-pulse'),800);
            });
        })();

        // small helpers
        (function(){ document.getElementById('userName').textContent = 'Aayush'; })();

        // Modal & controls wiring + toasts + accessibility
        (function(){
            // Toast system
            const container = document.createElement('div'); container.id='toastContainer'; container.className='fixed right-4 bottom-6 z-60 space-y-2 w-96'; document.body.appendChild(container);
            window.showToast = function(message, type='info', timeout=3500){
                const t = document.createElement('div');
                t.className = `p-3 rounded-lg shadow-lg text-sm ${type==='error'? 'bg-red-600' : type==='success'? 'bg-green-600' : 'bg-gray-800'} text-white`;
                t.setAttribute('role','status'); t.innerText = message;
                container.appendChild(t);
                setTimeout(()=>{ t.classList.add('opacity-0'); setTimeout(()=>t.remove(),400); }, timeout);
            };

            // Focus trap helper
            function trapFocus(modalEl){
                const focusable = 'a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex]:not([tabindex="-1"])';
                const nodes = modalEl.querySelectorAll(focusable);
                const first = nodes[0]; const last = nodes[nodes.length-1];
                function keyHandler(e){
                    if (e.key === 'Tab'){
                        if (e.shiftKey){ if (document.activeElement === first){ e.preventDefault(); last.focus(); } }
                        else { if (document.activeElement === last){ e.preventDefault(); first.focus(); } }
                    } else if (e.key === 'Escape'){
                        closeModal(modalEl.id);
                    }
                }
                document.addEventListener('keydown', keyHandler);
                // remove listener when closed
                modalEl._removeTrap = () => document.removeEventListener('keydown', keyHandler);
                if(first) first.focus();
            }

            function openModal(id){ const m=document.getElementById(id); if(!m) return; m.classList.remove('hidden'); m.style.display='flex'; document.body.style.overflow='hidden'; trapFocus(m); }
            function closeModal(id){ const m=document.getElementById(id); if(!m) return; m.classList.add('hidden'); m.style.display=''; document.body.style.overflow=''; if(m._removeTrap) m._removeTrap(); }

            // Settings modal triggers
            document.getElementById('profileBtn').addEventListener('click', ()=> openModal('settingsModal'));
            document.getElementById('closeSettings').addEventListener('click', ()=> closeModal('settingsModal'));

            // Settings tabs
            document.querySelectorAll('.settingsTab').forEach(btn => btn.addEventListener('click', e=>{
                const tab = e.currentTarget.dataset.tab;
                document.querySelectorAll('.settingsTab').forEach(b=>b.classList.remove('bg-white/3'));
                e.currentTarget.classList.add('bg-white/3');
                document.querySelectorAll('.settingsPane').forEach(p=>p.classList.add('hidden'));
                const pane = document.getElementById('tab-' + tab);
                if(pane) pane.classList.remove('hidden');
            }));

            // Language change: simulate UI label change (nav title)
            document.getElementById('languageSelect').addEventListener('change', e=>{
                const v = e.target.value;
                const label = { en:'Experience Dashboard', es:'Panel de Experiencia', fr:'Tableau de bord', hi:'‡§Ö‡§®‡•Å‡§≠‡§µ ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°' }[v]||'Experience Dashboard';
                document.querySelector('nav div:nth-child(1) > div').textContent = label;
            });

            // Billing actions
            document.getElementById('payInvoice').addEventListener('click', ()=>{
                // simulate payment
                document.getElementById('nextInvoiceDate').textContent = 'Paid ‚Äî Thanks';
                showToast('Payment simulated: Invoice paid successfully.', 'success');
            });

            // Logout simulation
            document.getElementById('logoutBtn').addEventListener('click', ()=>{
                closeModal('settingsModal');
                // redirect to landing (simulated)
                window.location.href = 'mood cafe.html';
            });

            // Quick Actions: find the Quick Actions panel and wire its buttons by order
            const quickPanel = Array.from(document.querySelectorAll('aside')).find(a=>a.textContent && a.textContent.includes('Quick Actions'));
            if(quickPanel){
                const qBtns = quickPanel.querySelectorAll('button');
                if(qBtns[0]) qBtns[0].addEventListener('click', ()=> openModal('bookingModal'));
                if(qBtns[1]) qBtns[1].addEventListener('click', ()=> openModal('redeemModal'));
                if(qBtns[2]) qBtns[2].addEventListener('click', ()=> openModal('referModal'));
            }

            // Booking modal controls
            document.getElementById('cancelBooking').addEventListener('click', ()=> closeModal('bookingModal'));
            document.getElementById('confirmBooking').addEventListener('click', ()=>{
                const zone = document.getElementById('bookZoneSelect').value;
                const dt = document.getElementById('bookDatetime').value; const display = dt ? dt.replace('T',' ‚Ä¢ ') : 'Scheduled';
                const bl = document.getElementById('bookingsList');
                const div = document.createElement('div'); div.className='flex items-center justify-between p-3 bg-white/3 rounded-lg';
                div.innerHTML = `<div><div class="font-medium">${zone}</div><div class="text-xs text-slate-300">${display}</div></div><div class="text-amber-300 font-semibold">$12</div>`;
                bl.prepend(div);
                closeModal('bookingModal');
                showToast('Booking confirmed (simulated).', 'success');
            });

            // Redeem controls
            document.getElementById('cancelRedeem').addEventListener('click', ()=> closeModal('redeemModal'));
            document.getElementById('confirmRedeem').addEventListener('click', ()=>{
                const amt = Number(document.getElementById('redeemAmount').value||0);
                const availEl = document.getElementById('availablePoints');
                let avail = Number(availEl.textContent||0);
                if(!amt || amt<=0){ showToast('Enter a valid amount to redeem.', 'error'); return; }
                if(amt>avail){ showToast('Not enough points.', 'error'); return; }
                avail -= amt; availEl.textContent = avail;
                closeModal('redeemModal');
                showToast('Redeemed ' + amt + ' points (simulated).', 'success');
            });

            // Refer controls
            document.getElementById('copyRef').addEventListener('click', ()=>{
                const txt = document.getElementById('refLink').textContent.trim();
                navigator.clipboard?.writeText(txt).then(()=> showToast('Referral link copied to clipboard!', 'success'), ()=> showToast('Copy failed ‚Äî select and copy manually.', 'error'));
            });
            document.getElementById('closeRefer').addEventListener('click', ()=> closeModal('referModal'));

            // Close modals on overlay click
            ['settingsModal','bookingModal','redeemModal','referModal'].forEach(id=>{
                const m = document.getElementById(id); if(!m) return;
                m.addEventListener('click', e=>{ if(e.target===m) closeModal(id); });
            });

            // Notification placeholder
            document.getElementById('notificationBtn').addEventListener('click', ()=> showToast('No new notifications (simulated).', 'info'));
        })();
    </script>
</body>
</html>